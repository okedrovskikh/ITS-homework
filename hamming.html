<!DOCTYPE html>
<html>
    <head>
	    <title>Hamming code</title>
	    <script>
		    function code(){
			   let input = document.getElementById('inputData').value;
			   let digits = new Array();
			   let count = 0;
			   for ( let i = 0; i < input.length; i++){
			    digits[i] = input.charAt(i) * 1;
				count++;
			   };
			   if(count > 2){
			    for (let i = 0; i < input.length - 2; i ++){
				    digits.push((digits[i] + digits[i + 1] + digits[count - 1])%2);
				}
				digits.push((digits[count - 1] + digits[count - 2] + digits[0])%2);
			   }
			   else if (count == 2){
			    digits.push((digits[0] + digits[1])%2);
			   }
			   else{
			    digits.push(digits[0]%2);
			   }
			   document.getElementById('codedData').value = digits.join('');
			}
			function decode(){
			   let input = document.getElementById('codedData').value;
			   let digits = new Array();
			   let check = new Array();
			   let count = 0, countch = 0;
			   let checkcode, code = '', codelen;
			   for (let i = 0; i < input.length; i++){
			    digits[i] = input.charAt(i) * 1;
				count++;
			   }
			   codelen = count / 2 + 0.5; // 0 -> code - 1
			   checkcode = codelen; // code -> count - 1
			   if(count > 3){
			    for (let i = 0; i < codelen; i++){
				    code += String(digits[i]);
				}
			    for (let i = 0; i < code.length; i++){
				    check[i] = code.charAt(i) * 1;
					countch++;
				}
			    for (let i = 0; i < code.length - 2; i ++){
				    check.push((check[i] + check[i + 1] + check[countch - 1])%2);
				}
				check.push((check[countch - 1] + check[countch - 2] + check[0])%2);
				document.getElementById('decodedData').value = check.join('');
			   }
			   else if(count == 3){
			    if ((digits[0] + digits[1] + digits[2]) % 2 == 0){
				    document.getElementById('decodedData').value = String(digits[0]) + String(digits[1]);
				}
			    else{
			        document.getElementById('decodedData').value = 'error';
			    }
			    }
			    else{
			     if (digits[0] == digits[1]){
			        document.getElementById('decodedData').value = digits[0];
			     }
			     else{
			        document.getElementById('decodedData').value = 'error';
				 }
			    }
			}
		</script>
    </head>
    <body>
	    <p><input type='text' id='inputData' /> input data</p>
		<p><input type='button' onclick = 'code()' value='Code'/></p>
		<p><input type='text' id='codedData' /> coded data</p>
		<p><input type='button' onclick='decode()' value='Decode'/></p>
		<p><input type='text' id='decodedData' /> decoded data</p>
    </body>
</html>